<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>웹어셈블리에서 자바스크립트를 빠르게 실행하는 방법 | bohyeon.dev</title>
    <meta name="description" content="bohyeon's blog">
    <link rel="preload stylesheet" href="/blog/assets/style.0228fa43.css" as="style">
    <script type="module" src="/blog/assets/app.0454d8ac.js"></script>
    <link rel="preload" href="/blog/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
  <link rel="modulepreload" href="/blog/assets/chunks/framework.acd5de9c.js">
  <link rel="modulepreload" href="/blog/assets/chunks/theme.49e3aeaf.js">
  <link rel="modulepreload" href="/blog/assets/log_making-javascript-run-fast-on-webassembly.md.3483ffd1.lean.js">
  <meta name="theme-color" content="#f28e1c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <script async="true" src="https://www.googletagmanager.com/gtag/js?id=G-5N3ZZ9JCCH"></script>
  <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-5N3ZZ9JCCH");</script>
  <link rel="icon" type="image/x-icon" href="/blog/favicon.ico">
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5dd72e99 data-v-b2cf3e0b><!--[--><!--]--><!--[--><span tabindex="-1" data-v-c8616af1></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-c8616af1> Skip to content </a><!--]--><!----><header class="VPNav" data-v-b2cf3e0b data-v-7e5bc4a5><div class="VPNavBar has-sidebar" data-v-7e5bc4a5 data-v-94c81dcc><div class="container" data-v-94c81dcc><div class="title" data-v-94c81dcc><div class="VPNavBarTitle has-sidebar" data-v-94c81dcc data-v-f4ef19a3><a class="title" href="/blog/" data-v-f4ef19a3><!--[--><!--]--><!----><!--[-->bohyeon.dev<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-94c81dcc><div class="curtain" data-v-94c81dcc></div><div class="content-body" data-v-94c81dcc><!--[--><!--]--><div class="VPNavBarSearch search" style="--vp-meta-key:&#39;Meta&#39;;" data-v-94c81dcc><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-94c81dcc data-v-7f418b0f><span id="main-nav-aria-label" class="visually-hidden" data-v-7f418b0f>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="https://github.com/ktseo41/blog" target="_blank" rel="noreferrer" tabindex="0" data-v-7f418b0f data-v-37adc828 data-v-8f4dc553><!--[-->GitHub<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-8f4dc553><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-94c81dcc data-v-f6a63727><label title="toggle dark mode" data-v-f6a63727 data-v-a9c8afb8><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-checked="false" data-v-a9c8afb8 data-v-f3c41672><span class="check" data-v-f3c41672><span class="icon" data-v-f3c41672><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-a9c8afb8><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-a9c8afb8><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></label></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-94c81dcc data-v-0394ad82 data-v-f6988cfb><!--[--><a class="VPSocialLink" href="https://www.linkedin.com/in/bo-hyeon-seo/" aria-label="linkedin" target="_blank" rel="noopener" data-v-f6988cfb data-v-c530cc0a><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>LinkedIn</title><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-94c81dcc data-v-40855f84 data-v-764effdf><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-764effdf><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-764effdf><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-764effdf><div class="VPMenu" data-v-764effdf data-v-e7ea1737><!----><!--[--><!--[--><!----><div class="group" data-v-40855f84><div class="item appearance" data-v-40855f84><p class="label" data-v-40855f84>Appearance</p><div class="appearance-action" data-v-40855f84><label title="toggle dark mode" data-v-40855f84 data-v-a9c8afb8><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-checked="false" data-v-a9c8afb8 data-v-f3c41672><span class="check" data-v-f3c41672><span class="icon" data-v-f3c41672><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-a9c8afb8><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-a9c8afb8><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></label></div></div></div><div class="group" data-v-40855f84><div class="item social-links" data-v-40855f84><div class="VPSocialLinks social-links-list" data-v-40855f84 data-v-f6988cfb><!--[--><a class="VPSocialLink" href="https://www.linkedin.com/in/bo-hyeon-seo/" aria-label="linkedin" target="_blank" rel="noopener" data-v-f6988cfb data-v-c530cc0a><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>LinkedIn</title><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-94c81dcc data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav" data-v-b2cf3e0b data-v-392e1bf8><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-392e1bf8><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-392e1bf8><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-392e1bf8>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-392e1bf8 data-v-079b16a8><button data-v-079b16a8>Return to top</button><!----></div></div><aside class="VPSidebar" data-v-b2cf3e0b data-v-af16598e><div class="curtain" data-v-af16598e></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-af16598e><span class="visually-hidden" id="sidebar-aria-label" data-v-af16598e> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-af16598e><section class="VPSidebarItem level-0" data-v-af16598e data-v-7a70b18e><div class="item" role="button" tabindex="0" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><h2 class="text" data-v-7a70b18e>☀</h2><!----></div><div class="items" data-v-7a70b18e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="/blog/debt.html" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>🧱 부채</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="/blog/archive.html" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>🏛 보관소</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-af16598e><section class="VPSidebarItem level-0" data-v-af16598e data-v-7a70b18e><div class="item" role="button" tabindex="0" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><h2 class="text" data-v-7a70b18e>📝️ 글</h2><!----></div><div class="items" data-v-7a70b18e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="/blog/posts/how-to-apply-utterances-on-vitepress.html" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>VitePress 블로그에 utternaces 적용하기</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="/blog/posts/how-to-generate-sitemap-xml-for-vitepress.html" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>Vitepress 블로그에 sitemap.xml 생성하는 방법</p><!--]--><!----></a><!----></div><!----></div><section class="VPSidebarItem level-1" data-v-7a70b18e data-v-7a70b18e><div class="item" role="button" tabindex="0" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><h3 class="text" data-v-7a70b18e>요약</h3><!----></div><div class="items" data-v-7a70b18e><!--[--><div class="VPSidebarItem level-2 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="/blog/log/short/toss-slash22-react-native-for-super-high-productivity.html" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>토스 | Slash 22 - 미친 생산성을 위한 React Native</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="/blog/log/short/ndc-keynotes-evolution-of-blockchain-and-virtual-reality.html" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>NDC [키노트] 블록체인과 가상세계의 진화</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="group" data-v-af16598e><section class="VPSidebarItem level-0 collapsible collapsed" data-v-af16598e data-v-7a70b18e><div class="item" role="button" tabindex="0" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><h2 class="text" data-v-7a70b18e>📝 번역</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-7a70b18e><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-7a70b18e><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-7a70b18e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="/blog/log/short/og-image-generation.html" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>Vercel Edge Functions - 사용 사례 - OG 이미지 생성</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="/blog/log/why-we-create-the-composition-api.html" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>컴포지션 API를 만든 이유</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="/blog/log/short/prevent-attacks-and-redirect-users-with-oauth-2_0-state-parameters.html" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>OAuth 2.0 상태 매개변수로 공격 방지 및 사용자 리디렉션하기</p><!--]--><!----></a><!----></div><!----></div><section class="VPSidebarItem level-1" data-v-7a70b18e data-v-7a70b18e><div class="item" role="button" tabindex="0" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><h3 class="text" data-v-7a70b18e>요약</h3><!----></div><div class="items" data-v-7a70b18e><!--[--><div class="VPSidebarItem level-2 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="/blog/log/short/four-eras-of-javascript-frameworks.html" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>네 시대의 자바스크립트 프레임워크</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="/blog/log/short/state-of-vue-2022-amsterdam-recap.html" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>State of Vue 2022 암스테르담</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="group" data-v-af16598e><section class="VPSidebarItem level-0 collapsible has-active" data-v-af16598e data-v-7a70b18e><div class="item" role="button" tabindex="0" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><!--[--><img class="text-icon" src="/blog/fearticle.png" alt="FEArticle" data-v-7a70b18e><h2 class="text" data-v-7a70b18e>FEArticle</h2><!--]--><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-7a70b18e><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-7a70b18e><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-7a70b18e><!--[--><div class="VPSidebarItem level-1 is-link is-active has-active" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="/blog/log/making-javascript-run-fast-on-webassembly.html" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>웹어셈블리에서 자바스크립트를 빠르게 실행하는 방법</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="/blog/log/avoid-these-common-pitfalls-of-react-usestate.html" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>리액트에서 useState를 사용하면서 저지를 수 있는 흔한 실수들</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="/blog/log/why-you-should-be-using-vue-new-composition-api.html" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>뷰의 새로운 컴포지션 API를 사용해야 하는 이유</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="/blog/log/fully-typed-web-apps.html" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>완전한 타입 안정성을 가진 웹 애플리케이션</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="/blog/log/what-if-we-had-local-first-software.html" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>로컬 우선 소프트웨어가 있다면 어떨까요?</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="/blog/log/web-push-for-web-apps-on-ios-and-ipados.html" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>iOS 및 iPadOS의 웹 앱용 웹 푸시</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="/blog/log/what-to-expect-from-vue-in-2023-and-how-it-differs-from-react.html" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>2023년 Vue에게 기대할 수 있는 점과 React와의 차이점</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="/blog/log/making-cloudflare-for-web.html" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>Cloudflare를 웹 애플리케이션을 위한 최고의 장소로 만들기</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="/blog/log/virtual-dom-back-in-block.html" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>가상 DOM: 블록으로 돌아가기</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="/blog/log/things-you-forgot-or-never-knew-because-of-react.html" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>리액트로 인해 잊었거나 전혀 몰랐던 것들</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="/blog/log/patterns-for-reactivity-with-modern-vanilla-javascript.html" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>모던 자바스크립트로 본 반응성을 구현하는 패턴</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="/blog/log/the-saga-of-the-closure-compiler-and-why-typescript-won.html" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>클로저 컴파일러의 역사, 그리고 타입스크립트가 승리한 이유</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="/blog/log/experimenting-with-measuring-soft-navigations.html" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>소프트 내비게이션 측정 실험하기</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="/blog/log/announcing-vue-3-4.html" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>Vue 3.4 발표</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-af16598e><section class="VPSidebarItem level-0 collapsible" data-v-af16598e data-v-7a70b18e><div class="item" role="button" tabindex="0" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><h2 class="text" data-v-7a70b18e>🕺🏻 프로젝트</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-7a70b18e><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-7a70b18e><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-7a70b18e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="https://github.com/ktseo41/iron-branch" target="_blank" rel="noreferrer" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>Iron Branch</p><!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-8f4dc553><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="https://github.com/ktseo41/quotes-sharer" target="_blank" rel="noreferrer" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>문장 공유기</p><!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-8f4dc553><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="https://github.com/ktseo41/route-calculator" target="_blank" rel="noreferrer" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>일랜시아 루트 계산기</p><!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-8f4dc553><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-af16598e><section class="VPSidebarItem level-0" data-v-af16598e data-v-7a70b18e><div class="item" role="button" tabindex="0" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><h2 class="text" data-v-7a70b18e>🔎 공부</h2><!----></div><div class="items" data-v-7a70b18e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="/blog/study/%ED%95%A8%EA%BB%98%EC%9E%90%EB%9D%BC%EA%B8%B0.html" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>함께자라기</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="/blog/study/Brilliant.html" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>Brilliant</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="/blog/study/%ED%81%B4%EB%A6%B0%20%EC%BD%94%EB%93%9C.html" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>클린 코드</p><!--]--><!----></a><!----></div><!----></div><section class="VPSidebarItem level-1" data-v-7a70b18e data-v-7a70b18e><div class="item" role="button" tabindex="0" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><h3 class="text" data-v-7a70b18e>리팩터링</h3><!----></div><div class="items" data-v-7a70b18e><!--[--><div class="VPSidebarItem level-2 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="/blog/study/refactoring/intro.html" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>들어가며</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="/blog/study/refactoring/chapter1.html" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>챕터 1 - 리팩터링: 첫번째 예시</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="/blog/study/refactoring/chapter2.html" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>챕터 2 - 리팩터링 원칙</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="/blog/study/refactoring/chapter3.html" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>챕터 3 - 코드에서 나는 악취</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="/blog/study/refactoring/chapter4.html" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>챕터 4 - 테스트 구축하기</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="/blog/study/refactoring/chapter6.html" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>챕터 6 - 기본적인 리팩터링</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="/blog/study/refactoring/chapter7.html" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>챕터 7 - 캡슐화</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="/blog/study/refactoring/chapter8.html" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>챕터 8 - 기능 이동</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="/blog/study/refactoring/chapter10.html" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>챕터 10 - 조건부 로직 간소화</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="/blog/study/refactoring/chapter11.html" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>챕터 11 - API 리팩터링</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="/blog/study/refactoring/chapter12.html" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>챕터 12 - 상속 다루기</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="group" data-v-af16598e><section class="VPSidebarItem level-0" data-v-af16598e data-v-7a70b18e><div class="item" role="button" tabindex="0" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><h2 class="text" data-v-7a70b18e>📟 Vim</h2><!----></div><div class="items" data-v-7a70b18e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-7a70b18e data-v-7a70b18e><div class="item" data-v-7a70b18e><div class="indicator" data-v-7a70b18e></div><a class="VPLink link link" href="/blog/vim.html" data-v-7a70b18e data-v-8f4dc553><!--[--><p class="text" data-v-7a70b18e>vim</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-b2cf3e0b data-v-a494bd1d><div class="VPDoc has-sidebar has-aside" data-v-a494bd1d data-v-c4b0d3cf><!--[--><!--]--><div class="container" data-v-c4b0d3cf><div class="aside" data-v-c4b0d3cf><div class="aside-curtain" data-v-c4b0d3cf></div><div class="aside-container" data-v-c4b0d3cf><div class="aside-content" data-v-c4b0d3cf><div class="VPDocAside" data-v-c4b0d3cf data-v-3f215769><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-3f215769 data-v-ff0f39c8><div class="content" data-v-ff0f39c8><div class="outline-marker" data-v-ff0f39c8></div><div class="outline-title" data-v-ff0f39c8>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-ff0f39c8><span class="visually-hidden" id="doc-outline-aria-label" data-v-ff0f39c8> Table of Contents for current page </span><ul class="root" data-v-ff0f39c8 data-v-9a431c33><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-c4b0d3cf><div class="content-container" data-v-c4b0d3cf><!--[--><!--]--><!----><main class="main" data-v-c4b0d3cf><div style="position:relative;" class="vp-doc _blog_log_making-javascript-run-fast-on-webassembly" data-v-c4b0d3cf><div><h1 id="웹어셈블리에서-자바스크립트를-빠르게-실행하는-방법" tabindex="-1">웹어셈블리에서 자바스크립트를 빠르게 실행하는 방법 <a class="header-anchor" href="#웹어셈블리에서-자바스크립트를-빠르게-실행하는-방법" aria-label="Permalink to &quot;웹어셈블리에서 자바스크립트를 빠르게 실행하는 방법&quot;">​</a></h1><blockquote><p>원문 : <a href="https://bytecodealliance.org/articles/making-javascript-run-fast-on-webassembly" target="_blank" rel="noreferrer">https://bytecodealliance.org/articles/making-javascript-run-fast-on-webassembly</a></p></blockquote><p><img src="https://bytecodealliance.org/articles/img/2021-06-02-js-on-wasm/featured_image.png" alt="js-on-wasm"></p><p>20년 전과 비교하면 브라우저에서 자바스크립트는 훨씬 더 빠르게 실행됩니다. 브라우저 벤더사가 집중적으로 성능 최적화 작업에 시간을 할애했기 때문입니다.</p><p>오늘 우리는 다른 규칙이 적용되는, 완전히 다른 환경에서 자바스크립트 성능을 최적화하는 작업을 시작합니다. 그리고 이것은 웹어셈블리 덕에 가능합니다.</p><p>먼저 확실히 해야 할 것이 있습니다. 브라우저에서 자바스크립트를 실행할 때는 간단히 자바스크립트를 배포하는 것이 가장 합리적인 선택입니다. 브라우저 내의 자바스크립트 엔진(JS 엔진)은 탑재된 자바스크립트를 실행하기 위해 고도로 조정되어 있기 때문입니다.</p><p>하지만 만약 서버리스 함수에서 자바스크립트를 실행하고 있다면 어떨까요? 또는 iOS나 게임 콘솔과 같이 일반적인 JIT(Just-In-Time) 컴파일을 허용하지 않는 환경에서 자바스크립트를 실행하고 싶다면요?</p><p>이와 같은 사례들의 경우, 오늘 알아볼 새로운 자바스크립트 최적화 물결에 주의를 기울여야 합니다. 이 작업은 또 비슷한 환경들에서 빠르게 실행되기를 원하는 Python, Ruby, Lua과 같은 다른 런타임들의 모델 역할을 할 수도 있습니다.</p><p>그러나 본격적으로 알아보기 전에, 기본적인 작동 방식을 살펴봐야 합니다.</p><h2 id="어떻게-작동하나요" tabindex="-1">어떻게 작동하나요? <a class="header-anchor" href="#어떻게-작동하나요" aria-label="Permalink to &quot;어떻게 작동하나요?&quot;">​</a></h2><p>자바스크립트를 실행하려면, 자바스크립트 소스 코드는 어떤 방법으로든 기계어로 번역돼 실행되어야 합니다. 번역된 기계어는 인터프리터나 JIT 컴파일러와 같은, 다양한 기술을 사용하는 JS 엔진에서 수행됩니다. (자세한 사항은 <a href="https://hacks.mozilla.org/2017/02/a-crash-course-in-just-in-time-jit-compilers/" target="_blank" rel="noreferrer">JIT(Just-In-Time) 컴파일러 집중 과정</a>를 참조하세요.)</p><p><img src="https://bytecodealliance.org/articles/img/2021-06-02-js-on-wasm/02-02-interp02.png" alt="Personified JS engine looking at JS source code and speaking the equivalent bytes of machine code out loud"></p><p>그러나 만약 실행하려는 플랫폼에 JS 엔진이 없다면 어떻게 해야할까요? 코드와 함께 JS 엔진을 배포해야 합니다.</p><p>이를 위해 JS 엔진을 웹어셈블리 모듈로 배포해 다양한 종류의 머신 아키텍처에서 이식될 수 있도록 했습니다. 그리고 WASI(웹어셈블리 시스템 인터페이스)를 사용하면 다른 운영 체제에도 이식될 수 있습니다.</p><p>이는 전체 자바스크립트 환경이 이 웹어셈블리 인스턴스에 묶인다는 것을 의미합니다. 그래서 일단 배포하고 나면, 자바스크립트 코드를 전달하기만 하면 해당 코드가 실행됩니다.</p><p><img src="https://bytecodealliance.org/articles/img/2021-06-02-js-on-wasm/01-02-how-it-works.png" alt="A box representing the Wasm engine wrapping a box representing the JS engine, with a JS file being passed through the Wasm engine to the JS engine."></p><p>그럼 기계의 메모리에서 직접 작업이 이뤄지는 대신, JS 엔진은 바이트코드부터 바이트코드가 조작하는 GCed(Garbage Collected) 객체까지 모든 것을 Wasm 모듈의 선형 메모리에 넣습니다.</p><p><img src="https://bytecodealliance.org/articles/img/2021-06-02-js-on-wasm/01-03-how-it-works.png" alt="The personified JS engine putting translated machine code bytes into the linear memory inside its box"></p><p>JS 엔진으로는 Firefox에서 사용되는 SpiderMonkey를 사용했습니다. SpiderMonkey는 브라우저에서 숱한 테스트를 거친, 업계에서 가장 강력한 자바스크립트 VM 중 하나입니다. 신뢰할 수 없는 코드 또는 신뢰할 수 없는 입력을 처리하는 코드를 실행할 때 이런 종류의 보안 테스트 및 투자는 중요합니다.</p><p>SpiderMonkey는 또한 정밀 스택 스캔(precise stack scanning)이라는 기술을 사용합니다. 뒤에서 설명하겠지만, 이는 일부 최적화에 중요한 기술입니다. 또 이해하고 읽기 매우 쉬운 코드 베이스를 가지고 있는데, 이는 Fastly, Mozilla 및 Igalia 3개의 다른 조직의 구성원들이 협력하고 있는 상황이기 때문에 중요합니다.</p><p>지금까지 설명한 접근 방식에서 혁신적인 것은 없습니다. 사람들은 이미 몇 년 동안 이처럼 웹어셈블리로 자바스크립트를 실행해 왔습니다.</p><p>문제는 느리다는 것입니다. 웹어셈블리는 새로운 기계 코드를 동적으로 생성하고 순수한 웹어셈블리 코드 내에서 실행할 수 없습니다. 즉, JIT를 사용할 수 없습니다. 인터프리터만 사용할 수 있습니다.</p><p>이 제약 조건을 감안하면, 당신은 다음과 같이 질문할 수 있습니다...</p><h2 id="그럼-대체-왜-하는-건가요" tabindex="-1">그럼 대체 왜 하는 건가요? <a class="header-anchor" href="#그럼-대체-왜-하는-건가요" aria-label="Permalink to &quot;그럼 대체 왜 하는 건가요?&quot;">​</a></h2><p>JIT를 통해 브라우저가 자바스크립트를 빠르게 실행할 수 있기 때문에(그리고 웹어셈블리는 모듈 내부에서 JIT 컴파일을 할 수 없기 때문에) 웹어셈블리를 사용하는 것이 직관에 반하는 것처럼 보일 수 있습니다.</p><p><img src="https://bytecodealliance.org/articles/img/2021-06-02-js-on-wasm/02-01-but-why.png" alt="A horrified developer screaming &quot;But Why!?&quot;"></p><p>하지만 만약 이런 상황에도 불구하고 자바스크립트를 빠르게 실행할 수 있다면 어떨까요?</p><p>이게 가능할 때, 유용할 수 있는 몇 가지 사례를 살펴보겠습니다.</p><h3 id="ios-및-기타-jit-제한-환경-에서-자바스크립트-실행" tabindex="-1">iOS(및 기타 JIT 제한 환경)에서 자바스크립트 실행 <a class="header-anchor" href="#ios-및-기타-jit-제한-환경-에서-자바스크립트-실행" aria-label="Permalink to &quot;iOS(및 기타 JIT 제한 환경)에서 자바스크립트 실행&quot;">​</a></h3><p>보안 문제로 인해 JIT를 사용할 수 없는 곳들이 있습니다 (예: 권한이 없는 iOS 앱, 일부 스마트 TV 및 게임 콘솔).</p><p><img src="https://bytecodealliance.org/articles/img/2021-06-02-js-on-wasm/02-02-non-jit-devices.png" alt="An iPhone, a smart TV, and a gaming controller"></p><p>이런 플랫폼에서는 인터프리터를 사용해야 합니다. 하지만 이런 플랫폼에서 실행되는 애플리케이션은 오래 실행되며 많은 코드가 필요합니다… 역사적으로, 이런 환경은 실행 속도를 훨씬 더 늦추기 때문에 인터프리터를 <em>사용하고 싶지 않은</em> 환경입니다.</p><p>만약 기존 접근 방식을 빠르게 만들 수 있다면, 개발자들은 지나친 성능 저하 없이도 JIT가 없는 플랫폼에서 자바스크립트를 사용할 수 있습니다.</p><h3 id="서버리스를-위한-즉각적인-콜드-스타트" tabindex="-1">서버리스를 위한 즉각적인 콜드 스타트 <a class="header-anchor" href="#서버리스를-위한-즉각적인-콜드-스타트" aria-label="Permalink to &quot;서버리스를 위한 즉각적인 콜드 스타트&quot;">​</a></h3><p>JIT가 문제가 아니지만 서버리스 함수와 같이 시작 시간이 문제인 것들도 있습니다. 여러분들도 한 번쯤은 들어봤을 콜드 스타트(cold-start) 지연 문제입니다.</p><p><img src="https://bytecodealliance.org/articles/img/2021-06-02-js-on-wasm/02-03-cloud.png" alt="A picture of a cloud with lots of edge network nodes around it"></p><p>가장 잘 갖춰진 자바스크립트 환경(순수히 JS 엔진만 가동하는 격리 환경)을 사용하는 경우에도 시작 지연 시간이 최소 5밀리 초까지 걸릴 수 있습니다. 여기에는 응용 프로그램을 초기화하는 데 걸리는 시간은 포함되지도 않습니다.</p><p>시작 시간 지연을 숨기는 방법들이 있습니다. 그러나 QUIC과 같은 제안에서 네트워크 계층에서 연결 시간이 최적화되고 있으므로 이를 숨기기가 점점 더 어려워지고 있습니다. 또한 여러 서버리스 기능을 함께 연결하는 것과 같은 작업을 수행할 때 이를 숨기는 것은 더욱 어렵습니다.</p><p>지연 시간을 숨기기 위해 이러한 기술을 사용하는 플랫폼은 종종 다른 요청 간에 인스턴스를 재사용합니다. 이는 때에 따라 서로 다른 요청 간에 전역 상태를 관찰할 수 있음을 의미하며 보안상 위험합니다.</p><p>콜드 스타트 문제로 인해 개발자들은 종종 모범 사례를 따르지 않습니다. 하나의 서버리스 배포에 많은 기능을 포함합니다. 이에 따라 장애 범위가 더 커질 수 있는 또 다른 보안 문제가 발생합니다. 해당 서버리스 배포의 한 부분이 악용되면 공격자는 해당 배포의 모든 항목에 접근할 수 있습니다.</p><p><img src="https://bytecodealliance.org/articles/img/2021-06-02-js-on-wasm/02-04-serverless-at-risk.png" alt="On the left, a cartoon captioned &quot;Risk between requests&quot;. It shows burgalers in a room filled with papers saying &quot;Oooh payday... check out what they left behind!&quot; On the right, a cartoon captioned &quot;Risk between modules&quot;. It shows a tree of modules with a module at the bottom being exploded and other modules in the tree getting hit by shrapnel."></p><p>그러나 이런 상황에서 자바스크립트 시작 시간을 충분히 빠르게 할 수 있다면, 갖가지 방법으로 시작 시간을 숨길 필요가 없습니다. 그저 마이크로초 안에 인스턴스를 시작하면 됩니다.</p><p>결과적으로 각 요청마다 새 인스턴스를 사용할 수 있습니다. 즉, 여러 요청 사이에 공유되는 상태가 존재하지 않습니다.</p><p>이 인스턴스들은 매우 가볍기 때문에 개발자는 자유롭게 코드를 세분화할 수 있고, 단일 코드 조각에 대한 장애 반경이 최소화됩니다.</p><p><img src="https://bytecodealliance.org/articles/img/2021-06-02-js-on-wasm/02-05-serverless-protected.png" alt="On the left, a cartoon captioed &quot;isolation between requests&quot;. It shows the same bugalers, but in a totally clean room saying &quot;Nuthin&#39;... they didn&#39;t leave nuthin&#39; behind.&quot; On the right, a cartoon captioned &quot;isolation between modules&quot;. It shows a module graph with each module having its own box around it, and the explosion from the exploding module being contained to its own box"></p><p>이 접근 방식에는 또 다른 보안 이점이 있습니다. 단순히 경량화되고 세분화된 격리를 가능하게 하는 것 외에도, Wasm 엔진의 보안 경계는 더 신뢰할 수 있습니다.</p><p>격리를 생성하는 데 사용되는 기존 JS 엔진은 매우 복잡한 최적화를 수행하는 많은 저수준 코드를 포함하는 대규모 코드 베이스입니다. 때문에, 공격자가 VM을 탈출하고 VM이 실행 중인 시스템에 액세스 할 수 있도록 허용하는 버그가 발견되기도 쉽습니다. 이것이 바로 <a href="https://www.chromium.org/Home/chromium-security/site-isolation" target="_blank" rel="noreferrer">Chrome</a> 및 <a href="https://blog.mozilla.org/security/2021/05/18/introducing-site-isolation-in-firefox/" target="_blank" rel="noreferrer">Firefox</a>에서 각 사이트가 완전히 분리된 프로세스에서 실행되도록 최대한 노력하는 이유입니다.</p><p>이와 비교해서, Wasm 엔진은 훨씬 적은 코드가 필요하므로 검사하기가 더 쉽고, 많은 부분이 메모리 안전성이 보장된 언어인 Rust로 작성됩니다. 그리고 웹어셈블리 모듈에서 생성된 기본 바이너리의 메모리 격리는 <a href="http://cseweb.ucsd.edu/~dstefan/pubs/johnson:2021:veriwasm.pdf" target="_blank" rel="noreferrer">검증할 수 있습니다</a>.</p><p>Wasm 엔진 내부에서 JS 엔진을 실행함으로써 우리는 외부에 더 안전한 샌드박스 경계를 또 다른 방어선으로 갖게 됩니다.</p><p>앞선 사례들을 살펴보니 Wasm에서 자바스크립트를 빠르게 만드는 것에는 큰 이점이 있었습니다. 그래서 어떻게 할 수 있을까요?</p><p>이 질문에 답하려면, JS 엔진이 시간을 할애하는 영역을 이해해야 합니다.</p><h2 id="js-엔진이-시간을-보내는-두-영역" tabindex="-1">JS 엔진이 시간을 보내는 두 영역 <a class="header-anchor" href="#js-엔진이-시간을-보내는-두-영역" aria-label="Permalink to &quot;JS 엔진이 시간을 보내는 두 영역&quot;">​</a></h2><p>JS 엔진이 수행하는 작업은 대략 두 부분으로 나눌 수 있습니다: 초기화와 런타임.</p><p>저는 JS 엔진을 청부업자라고 생각합니다. 이 청부업자는 자바스크립트 코드를 실행하고 결과를 얻는 작업을 완료하기 위해 존재합니다.</p><p><img src="https://bytecodealliance.org/articles/img/2021-06-02-js-on-wasm/03-01-office-handshake.png" alt="The JS engine shaking hands with a JS file and saying &quot;I&#39;m looking forward to helping you with this project!&quot;"></p><h3 id="초기화-단계" tabindex="-1">초기화 단계 <a class="header-anchor" href="#초기화-단계" aria-label="Permalink to &quot;초기화 단계&quot;">​</a></h3><p>청부업자는 실제로 프로젝트 실행을 시작하기 전에 약간의 예비 작업을 수행해야 합니다. 초기화 단계에는 실행의 시작 단계에서 한 번만 실행되면 되는 모든 것들이 포함됩니다.</p><h4 id="애플리케이션-초기화" tabindex="-1">애플리케이션 초기화 <a class="header-anchor" href="#애플리케이션-초기화" aria-label="Permalink to &quot;애플리케이션 초기화&quot;">​</a></h4><p>모든 프로젝트에서 청부업자는 고객이 원하는 작업을 살펴본 다음, 해당 작업을 완료하는 데 필요한 리소스들을 설정합니다.</p><p>예를 들어, 청부업자는 프로젝트 브리핑 및 기타 문서들을 읽고 작업하기 쉬운 형식으로 변환합니다. 예를 들어 모든 문서를 저장하고 정리하면서 프로젝트 관리 시스템을 세팅합니다.</p><p><img src="https://bytecodealliance.org/articles/img/2021-06-02-js-on-wasm/03-03-office-kickoff.png" alt="The JS engine sitting in its office with the JS file and saying &quot;So tell me more about the work you want to get done&quot;"></p><p>JS 엔진의 경우 이 작업은 소스 코드의 최상위 레벨을 읽어가며 함수를 바이트 코드로 파싱 하고, 선언된 변수에 메모리를 할당하고, 이미 정의된 값들을 세팅하는 것과 비슷합니다.</p><h4 id="엔진-초기화" tabindex="-1">엔진 초기화 <a class="header-anchor" href="#엔진-초기화" aria-label="Permalink to &quot;엔진 초기화&quot;">​</a></h4><p>서버리스와 같은 특정 환경에서는, 각 애플리케이션 초기화 전에 발생하는 또 다른 초기화 부분이 있습니다.</p><p>바로 엔진 초기화입니다. 먼저 JS 엔진 자체를 시작해야 하고 내장 함수들을 환경에 추가해야 합니다.</p><p>이는 작업을 시작하기 전에 이케아 의자와 테이블을 조립하는 것처럼 사무실 자체를 세팅하는 것과 비슷하다고 생각합니다.</p><p><img src="https://bytecodealliance.org/articles/img/2021-06-02-js-on-wasm/03-02-office-ikea.png" alt="The JS engine building the IKEA table for its office"></p><p>이 작업은 상당한 시간이 걸릴 수 있으며 서버리스 사용 사례에서 콜드 스타트 문제를 만드는 원인이기도 합니다.</p><h3 id="런타임-단계" tabindex="-1">런타임 단계 <a class="header-anchor" href="#런타임-단계" aria-label="Permalink to &quot;런타임 단계&quot;">​</a></h3><p>초기화 단계가 완료되면 JS 엔진이 코드 실행 작업을 시작할 수 있습니다.</p><p><img src="https://bytecodealliance.org/articles/img/2021-06-02-js-on-wasm/03-04-office-kanban.png" alt="The JS engine moving cards across a Kanban board, all the way to the done position"></p><p>이 영역의 속도를 스루풋(throughput)이라고 하며 이 스루풋은 다양한 변수의 영향을 받습니다. 예를 들어보면,</p><ul><li>사용하는 언어의 기능</li><li>JS 엔진의 관점에서 코드가 예측할 수 있게 동작하는지 여부</li><li>어떤 종류의 데이터 구조가 사용되는지</li><li>코드가 JS 엔진의 최적화 컴파일러를 활용할 수 있을 만큼 충분히 오래 실행되는지 여부</li></ul><p>이것이 JS 엔진이 시간을 보내는 두 단계입니다.</p><p><img src="https://bytecodealliance.org/articles/img/2021-06-02-js-on-wasm/03-05-office-sequence.png" alt="A sequence of the three previous images, showing the office building and requirements gathering as initialization, and moving work across the Kanban board as runtime."></p><p>그럼 이 두 단계의 작업을 어떻게 더 빠르게 진행할 수 있을까요?</p><h2 id="초기화-시간을-대폭-단축시키기" tabindex="-1">초기화 시간을 대폭 단축시키기 <a class="header-anchor" href="#초기화-시간을-대폭-단축시키기" aria-label="Permalink to &quot;초기화 시간을 대폭 단축시키기&quot;">​</a></h2><p>우리는 <a href="https://github.com/bytecodealliance/wizer" target="_blank" rel="noreferrer">Wizer</a>라는 도구로 초기화를 빠르게 만들기 시작했습니다. 천천히 설명하겠지만 성급하신 분들을 위해 먼저 보여드리겠습니다, 간단한 자바스크립트 애플리케이션을 실행할 때 아래와 같은 속도 향상이 있었습니다.</p><p><img src="https://bytecodealliance.org/articles/img/2021-06-02-js-on-wasm/04-01-startup-latency-vs-isolate.png" alt="A graph showing startup latency times. JS isolate takes 5ms and JS on Wasm takes 0.36ms."></p><p>간단한 애플리케이션을 Wizer로 실행하면 0.36 밀리초(또는 360 마이크로초)밖에 걸리지 않았습니다. 이는 일반적인 자바스크립트 접근 방식에서보다 13배 이상 빠릅니다.</p><p>우리는 스냅샷이라는 것을 사용해 시작 시간을 향상시켰습니다. Nick Fitzgerald가 <a href="https://youtu.be/C6pcWRpHWG0?t=1338" target="_blank" rel="noreferrer">WebAssembly Summit talk about Wizer</a>에서 자세히 설명했습니다.</p><p>그래서 어떻게 작동하냐구요? 코드가 배포되기 전 빌드 단계의 일환으로, 초기화가 끝날 때까지 JS 엔진을 사용하여 자바스크립트 코드를 실행합니다.</p><p>이 시점에 JS 엔진은 모든 자바스크립트를 파싱해 바이트코드로 전환하고, 이 바이트코드는 JS 엔진 모듈에 의해 선형 메모리에 저장됩니다. 또한 이 단계에서 엔진은 많은 메모리 할당 및 초기화를 수행합니다.</p><p>이 선형 메모리는 매우 독립적이기 때문에, 모든 값이 채워지면 그저 메모리를 가져와 데이터 섹션으로써 Wasm 모듈에 연결할 수 있습니다.</p><p>JS 엔진 모듈이 인스턴스화 되면, 데이터 섹션의 모든 데이터에 접근할 수 있습니다. 엔진이 어떤 데이터가 필요하다면 필요한 데이터 섹션(또는 그저 메모리 페이지를)을 자체 선형 메모리에 복사할 수 있습니다. 따라서 JS 엔진은 시작할 때 어떤 설정도 할 필요가 없습니다. 사전에 초기화된 모든 값이 준비되어 대기 중입니다.</p><p><img src="https://bytecodealliance.org/articles/img/2021-06-02-js-on-wasm/04-02-wasm-file-copy-mem.png" alt="A wasm file split between code and data sections, with the data section being poured into linear memory."></p><p>현재는 이 데이터 섹션을 JS 엔진과 동일한 모듈에 연결합니다. 하지만 앞으로 <a href="https://github.com/WebAssembly/module-linking/blob/master/proposals/module-linking/Explainer.md" target="_blank" rel="noreferrer">모듈 연결</a>이 준비되면 데이터 섹션을 별도의 모듈로 이용할 수 있습니다. 그럼 JS 엔진 모듈을 다양한 자바스크립트 애플리케이션에서 재사용할 수 있습니다.</p><p>이렇게 되면 정말 깔끔한 분리가 가능합니다.</p><p>JS 엔진 모듈은 엔진용 코드만 포함하게 됩니다. 즉, 일단 컴파일되면 해당 코드를 효과적으로 캐시 하고 많은 다른 인스턴스 간에 재사용할 수 있습니다.</p><p>반면 애플리케이션 모듈에는 Wasm 코드가 포함되지 않습니다. 초기화된 나머지 JS 엔진 상태와 함께 자바스크립트 바이트코드를 포함하는 선형 메모리만 포함합니다. 이렇게 하면 이 메모리를 쉽게 필요한 곳으로 보낼 수 있습니다.</p><p><img src="https://bytecodealliance.org/articles/img/2021-06-02-js-on-wasm/04-03-wasm-file-data-vs-code.png" alt="Two wasm files next to each other. The one for the JS engine module only has a code section, the other for the JS application module only has a data section"></p><p>이건 마치 JS 엔진 청부업자에게 사무실이 전혀 필요하지 않은 것과 같습니다. 대신 여행용 케이스만 가지고 다닙니다. 여행용 케이스에는 전체 사무실이 있고, JS 엔진이 작동할 수 있도록 모든 설정과 준비도 되어 있습니다.</p><p><img src="https://bytecodealliance.org/articles/img/2021-06-02-js-on-wasm/04-04-preinitiatlized-engine.png" alt="A personified Wasm engine placing a snapshot of the JS engine&#39;s office down inside of the Wasm engine and saying &quot;I&#39;ll just set this down for you so you can get right to work&quot;"></p><p>그리고 이 방식의 가장 멋진 점은 자바스크립트에 의존적이지 않다는 것입니다. 웹어셈블리의 기존 속성을 사용하는 것뿐입니다. 따라서 Python, Ruby, Lua 또는 기타 런타임에서도 이와 동일한 기술을 사용할 수 있습니다.</p><h2 id="다음-단계-스루풋-개선" tabindex="-1">다음 단계: 스루풋 개선 <a class="header-anchor" href="#다음-단계-스루풋-개선" aria-label="Permalink to &quot;다음 단계: 스루풋 개선&quot;">​</a></h2><p>따라서 이 접근 방식을 사용해 매우 빠른 초기화 시간을 얻을 수 있습니다. 그럼 스루풋은요?</p><p>일부 사용 사례의 경우 스루풋이 그렇게 나쁘지 않습니다. 매우 짧게 실행되는 자바스크립트 조각인 경우, 어쨌든 JIT를 거치지 않고 전체가 인터프리터를 통해 실행됩니다. 따라서 이 경우 스루풋은 브라우저에서와 거의 동일하며, 기존의 JS 엔진이 초기화를 완료하기 전에 완료됩니다.</p><p>그러나 더 오래 실행되는 자바스크립트라면 JIT가 금방 작동하기 시작합니다. 일단 작동하기 시작하면 스루풋 차이가 분명해지기 시작합니다.</p><p>위에서 말했듯이 현재 순수한 웹어셈블리 내에서 코드를 JIT 컴파일하는 것은 불가능합니다. 다만 JIT에 적용되는 개념 중 일부를 Ahead-Of-Time 컴파일 모델에 적용할 수 있음이 밝혀졌습니다.</p><h3 id="프로파일링-없이-aot-컴파일된-빠른-js" tabindex="-1">(프로파일링 없이) AOT 컴파일된 빠른 JS <a class="header-anchor" href="#프로파일링-없이-aot-컴파일된-빠른-js" aria-label="Permalink to &quot;(프로파일링 없이) AOT 컴파일된 빠른 JS&quot;">​</a></h3><p>JIT가 사용하는 한 가지 최적화 기술은 인라인 캐싱(Inline Caching, 이하 IC)입니다. 인라인 캐싱을 통해, JIT는 자바스크립트 바이트코드가 과거에 실행된 모든 방식에 대한 빠른 기계어 경로를 포함하는 스텁의 연결 리스트를 생성합니다. (자세한 사항은 <a href="https://hacks.mozilla.org/2017/02/a-crash-course-in-just-in-time-jit-compilers/" target="_blank" rel="noreferrer">JIT(Just-In-Time) 컴파일러 집중 과정</a> 참고하세요)</p><p><img src="https://bytecodealliance.org/articles/img/2021-06-02-js-on-wasm/02-06-jit09.png" alt="The personified JS engine standing in front of a matrix of JS bytecode entries and creating machine code stubs for them based on frequency feedback from a monitor"></p><p>이 리스트가 필요한 이유는 자바스크립트의 동적 타입 때문입니다. 코드 라인이 다른 타입을 사용할 때마다 새 스텁을 생성하고 목록에 추가해야 합니다. 그러나 이전에 같은 타입을 사용해 실행한 적이 있다면 이미 생성된 스텁을 사용할 수 있습니다.</p><p>인라인 캐싱은 일반적으로 JIT에서 사용되기 때문에, 인라인 캐싱이 매우 동적이고 프로그램마다 고유하다고 생각되는 경우가 많습니다. 그러나 AOT 환경에서도 적용될 수 있음이 밝혀졌습니다.</p><p>그리고 자바스크립트 코드를 살펴보지 않아도, 생성해야 할 많은 IC 스텁들을 알 수 있습니다. JS에는 많이 사용되는 패턴이 있기 때문입니다.</p><p>좋은 예는 객체의 속성에 접근하는 것입니다. 이는 많은 자바스크립트 코드에서 일어나며 IC 스텁을 사용해 속도를 높일 수 있습니다. 특정 &quot;모양(shape)&quot; 또는 &quot;숨겨진 클래스&quot;(즉, 동일한 방식으로 배치된 속성들)가 있는 객체의 경우 특정 속성에 접근할 때 해당 속성은 항상 동일한 오프셋에 있습니다.</p><p>전통적으로 JIT의 이러한 종류의 IC 스텁은 모양에 대한 포인터와 속성의 오프셋이라는 두 가지 값을 하드 코딩합니다. 이를 위해서는 사전에(Ahead-Of-Time)는 알 수 없는 정보가 필요합니다. 그러나 우리는 IC 스텁을 매개변수화 할 수 있습니다. 모양과 속성 오프셋을 스텁에 전달되는 변수로 취급할 수 있습니다.</p><p>이렇게 하면 메모리에서 값을 로드하는 단일 스텁을 생성한 다음, 모든 곳에서 이 스텁 코드를 사용할 수 있습니다. 자바스크립트 코드가 실제로 수행하는 작업과 관계없이 이러한 공통 패턴들에 대한 모든 스텁을 AOT 컴파일된 모듈에 만들어들 수 있습니다. 심지어 브라우저에서도 이 IC를 공유하면 유용할 수 있습니다. JS 엔진이 더 적은 기계어를 생성하게 돼 시작 시간과 명령 캐시 지역성(instruction-cache locality)을 개선하기 때문입니다.</p><p>이번 사례에서는 이 개념이 특히 중요합니다. 자바스크립트 코드가 실제로 수행하는 작업과 관계없이, 이러한 공통 패턴에 대한 모든 스텁을 AOT 컴파일된 모듈에 마련해둘 수 있음을 의미하기 때문입니다.</p><p>우리는 몇 킬로바이트의 IC 스텁으로 모든 자바스크립트 코드의 대부분을 다룰 수 있다는 것을 발견했습니다. 예를 들어 2KB의 IC 스텁으로 Google Octane 벤치마크에서 자바스크립트의 95%를 커버할 수 있습니다. 예비 테스트에서 이 비율은 일반적인 웹 브라우징에서도 유지되는 것으로 보입니다.</p><p><img src="https://bytecodealliance.org/articles/img/2021-06-02-js-on-wasm/talk-stub-coverage.png" alt="A small pile of stubs on the left and a large pile of JS files on the right"></p><p>이런 종류의 최적화를 적용하면 초기 JIT와 동등한 스루풋에 도달할 수 있을 것입니다. 해당 작업을 완료하고 나면 브라우저의 JS 엔진 팀이 초기 JIT에서 그랬듯이, 더 디테일한 최적화를 추가하고 성능을 연마할 것입니다.</p><h3 id="다음-다음-단계-약간의-프로파일링을-추가할-수-있을지도요" tabindex="-1">다음, 다음 단계: 약간의 프로파일링을 추가할 수 있을지도요? <a class="header-anchor" href="#다음-다음-단계-약간의-프로파일링을-추가할-수-있을지도요" aria-label="Permalink to &quot;다음, 다음 단계: 약간의 프로파일링을 추가할 수 있을지도요?&quot;">​</a></h3><p>앞서 말한 것들이 프로그램이 뭘 하고 어떤 타입들이 프로그램에서 사용되는지 알지 못한 채로, 미리(Ahead-Of-Time) 할 수 있는 것들입니다.</p><p>그러나 JIT가 가지고 있는 것과 같은 종류의 프로파일링 정보에 접근할 수 있다면 어떨까요? 그럼 코드를 완전히 최적화할 수 있습니다.</p><p>다만 여기에는 문제가 있습니다. 개발자는 종종 자신의 코드를 프로파일링하는 데 어려움을 겪습니다. 대표적인 샘플 워크로드를 찾는 건 어렵습니다. 따라서 좋은 프로파일링 데이터를 얻을 수 있을지 확신할 수 없습니다.</p><p>프로파일링을 위해 좋은 도구를 사용할 수 있는 방법을 알아낼 수만 있다면, 자바스크립트를 오늘날의 JIT만큼 빠르게 실행할 수도 있습니다 (그리고 이 방식에는 예열 시간도 필요 없습니다!).</p><h2 id="당장-시작하는-방법" tabindex="-1">당장 시작하는 방법 <a class="header-anchor" href="#당장-시작하는-방법" aria-label="Permalink to &quot;당장 시작하는 방법&quot;">​</a></h2><p>우리는 이 새로운 접근 방식에 대해 매우 기대가 크고, 어디까지 추진할 수 있을지 기대하고 있습니다. 또 다른 동적 타입 언어들이 같은 방식으로 웹어셈블리에 제공되는 것을 보기를 기대하고 있습니다.</p><p>당장 시작할 수 있는 몇 가지 방법이 있습니다. 궁금한 점이 있는 경우 <a href="https://bytecodealliance.zulipchat.com/" target="_blank" rel="noreferrer">Zulip</a>에서 물어보세요.</p><h3 id="자바스크립트를-지원하려는-다른-플랫폼의-경우" tabindex="-1">자바스크립트를 지원하려는 다른 플랫폼의 경우 <a class="header-anchor" href="#자바스크립트를-지원하려는-다른-플랫폼의-경우" aria-label="Permalink to &quot;자바스크립트를 지원하려는 다른 플랫폼의 경우&quot;">​</a></h3><p>자체 플랫폼에서 자바스크립트를 실행하려면 WASI를 지원하는 웹어셈블리 엔진을 내장해야 합니다. 이를 위해 <a href="https://github.com/bytecodealliance/wasmtime" target="_blank" rel="noreferrer">Wasmtime</a>를 사용할 수 있습니다.</p><p>그런 다음 JS 엔진이 필요합니다. 이 작업의 일환으로 SpiderMonkey를 WASI로 컴파일하기 위해 Mozilla의 빌드 시스템에 대해 전폭적인 지원을 하고 있습니다. 그리고 Mozilla는 Firefox를 빌드하고 테스트하는 데 사용되는 것과 동일한 CI 설정에 SpiderMonkey용 WASI 빌드를 추가하려고 합니다. 이는 WASI가 SpiderMonkey의 프로덕션 목표 중 하나가 되게 하고, WASI 빌드가 시간이 지나도 계속 작동함을 보장합니다. 즉, 앞서 설명한 방식 그대로 <a href="https://spidermonkey.dev/" target="_blank" rel="noreferrer">SpiderMonkey를 사용</a>할 수 있습니다.</p><p>마지막으로, 사용자가 사전 초기화된 JS를 가져와야 합니다. 이를 돕기 위해 <a href="https://github.com/bytecodealliance/wizer" target="_blank" rel="noreferrer">Wizer</a>를 오픈 소스화 했고, 이를 <a href="https://github.com/bytecodealliance/wizer#using-wizer-as-a-library" target="_blank" rel="noreferrer">빌드 도구에 통합</a>해 JS 엔진 모듈의 사전 초기화된 메모리를 채우는, 애플리케이션별 웹어셈블리 모듈을 생성할 수 있습니다.</p><h3 id="이-접근-방식을-사용하려는-다른-언어의-경우" tabindex="-1">이 접근 방식을 사용하려는 다른 언어의 경우 <a class="header-anchor" href="#이-접근-방식을-사용하려는-다른-언어의-경우" aria-label="Permalink to &quot;이 접근 방식을 사용하려는 다른 언어의 경우&quot;">​</a></h3><p>Python, Ruby, Lua 등과 같은 언어 커뮤니티의 일원이라면 해당 언어에 대한 버전도 빌드할 수 있습니다.</p><p>먼저, 앞서 SpiderMonkey를 이용했던 것처럼, 시스템 호출에는 WASI를 사용하여 런타임을 웹어셈블리로 컴파일해야 합니다. 그런 다음 스냅샷으로 빠른 시작 시간을 얻으려면 역시 앞서 설명한 것처럼 <a href="https://github.com/bytecodealliance/wizer#using-wizer-as-a-library" target="_blank" rel="noreferrer">Wizer를 빌드 도구에 통합</a>해 메모리 스냅샷을 생성할 수 있습니다.</p><br><br></div></div></main><footer class="VPDocFooter" data-v-c4b0d3cf data-v-face870a><!--[--><!--[--><!--[--><!--[--><!--[--><br data-v-5dd72e99><blockquote class="custom" data-v-5dd72e99><p data-v-5dd72e99>🚀 한국어로 된 프런트엔드 아티클을 빠르게 받아보고 싶다면 <a href="https://kofearticle.substack.com/" target="_blank" rel="noreferrer" data-v-5dd72e99>Korean FE Article</a>을 구독해주세요.</p></blockquote><!--]--><div id="comment" data-v-5dd72e99></div><!--]--><!--]--><!--]--><!--]--><div class="edit-info" data-v-face870a><!----><div class="last-updated" data-v-face870a><p class="VPLastUpdated" data-v-face870a data-v-7b3ebfe1>Last updated: <time datetime="2023-01-05T13:24:04.000Z" data-v-7b3ebfe1></time></p></div></div><div class="prev-next" data-v-face870a><div class="pager" data-v-face870a><a class="pager-link prev" href="/blog/log/short/state-of-vue-2022-amsterdam-recap.html" data-v-face870a><span class="desc" data-v-face870a>Previous page</span><span class="title" data-v-face870a>State of Vue 2022 암스테르담</span></a></div><div class="has-prev pager" data-v-face870a><a class="pager-link next" href="/blog/log/avoid-these-common-pitfalls-of-react-usestate.html" data-v-face870a><span class="desc" data-v-face870a>Next page</span><span class="title" data-v-face870a>리액트에서 useState를 사용하면서 저지를 수 있는 흔한 실수들</span></a></div></div></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"aoc_2022_day2.md\":\"d790b2ab\",\"aoc_2022_day1.md\":\"8e47c488\",\"aoc_2022_day3.md\":\"3873e731\",\"aoc_2022_day6.md\":\"da2bb4a5\",\"aoc_2022_day4.md\":\"403106cd\",\"aoc_2022_index.md\":\"0f06f334\",\"aoc_2022_day5.md\":\"da6816e9\",\"index.md\":\"62dc5e00\",\"log_announcing-vue-3-4.md\":\"d2bad45c\",\"archive.md\":\"998f7bb8\",\"reading.md\":\"6dc0d300\",\"log_fully-typed-web-apps.md\":\"be74a8bd\",\"study_함께자라기.md\":\"c352e63e\",\"study_brilliant.md\":\"edcc04b3\",\"log_making-javascript-run-fast-on-webassembly.md\":\"3483ffd1\",\"log_avoid-these-common-pitfalls-of-react-usestate.md\":\"7b868ac9\",\"debt.md\":\"4c88fb36\",\"posts_how-to-apply-utterances-on-vitepress.md\":\"42fe356f\",\"log_making-cloudflare-for-web.md\":\"bb51efba\",\"log_short_og-image-generation.md\":\"b0478e21\",\"study_leetcode.md\":\"a8e54567\",\"log_short_four-eras-of-javascript-frameworks.md\":\"07770183\",\"posts_how-to-generate-sitemap-xml-for-vitepress.md\":\"bc2c0daf\",\"log_the-saga-of-the-closure-compiler-and-why-typescript-won.md\":\"7c176b0c\",\"log_web-push-for-web-apps-on-ios-and-ipados.md\":\"8dbd1e5f\",\"study_refactoring_chapter4.md\":\"d74935fb\",\"study_클린 코드.md\":\"d76170cd\",\"study_refactoring_chapter12.md\":\"1d68ac01\",\"study_refactoring_chapter2.md\":\"2a48a1e8\",\"study_refactoring_chapter11.md\":\"df5e9bc6\",\"study_refactoring_chapter8.md\":\"79a1800e\",\"log_experimenting-with-measuring-soft-navigations.md\":\"c4fb68a8\",\"study_refactoring_intro.md\":\"ff4f7ede\",\"log_short_prevent-attacks-and-redirect-users-with-oauth-2_0-state-parameters.md\":\"4b9acc76\",\"log_why-we-create-the-composition-api.md\":\"96e275de\",\"vim.md\":\"06042b5c\",\"log_virtual-dom-back-in-block.md\":\"9270ada7\",\"log_short_toss-slash22-react-native-for-super-high-productivity.md\":\"1eb658a8\",\"log_what-if-we-had-local-first-software.md\":\"e3ef9bb6\",\"study_refactoring_chapter10.md\":\"51cb07d9\",\"study_누구나 자료구조와 알고리즘.md\":\"0f5daad4\",\"log_short_ndc-keynotes-evolution-of-blockchain-and-virtual-reality.md\":\"c8fd0a43\",\"log_things-you-forgot-or-never-knew-because-of-react.md\":\"f0c56b30\",\"log_what-to-expect-from-vue-in-2023-and-how-it-differs-from-react.md\":\"6c76c40b\",\"study_자바스크립트 알고리즘 문제풀이.md\":\"88843ece\",\"log_why-you-should-be-using-vue-new-composition-api.md\":\"6029c5d3\",\"study_refactoring_chapter7.md\":\"bbd604bd\",\"log_short_state-of-vue-2022-amsterdam-recap.md\":\"679f2865\",\"study_refactoring_chapter3.md\":\"c0af36f2\",\"study_refactoring_chapter1.md\":\"93fff564\",\"study_refactoring_chapter6.md\":\"1ff45830\",\"log_patterns-for-reactivity-with-modern-vanilla-javascript.md\":\"db6c5f87\"}")
__VP_SITE_DATA__ = JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"bohyeon.dev\",\"description\":\"bohyeon's blog\",\"base\":\"/blog/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"contributors\":false,\"nav\":[{\"text\":\"GitHub\",\"link\":\"https://github.com/ktseo41/blog\"}],\"socialLinks\":[{\"icon\":\"linkedin\",\"link\":\"https://www.linkedin.com/in/bo-hyeon-seo/\"}],\"sidebar\":[{\"text\":\"☀\",\"items\":[{\"text\":\"🧱 부채\",\"link\":\"/debt\"},{\"text\":\"🏛 보관소\",\"link\":\"/archive\"}]},{\"text\":\"📝️ 글\",\"items\":[{\"text\":\"VitePress 블로그에 utternaces 적용하기\",\"link\":\"/posts/how-to-apply-utterances-on-vitepress\"},{\"text\":\"Vitepress 블로그에 sitemap.xml 생성하는 방법\",\"link\":\"/posts/how-to-generate-sitemap-xml-for-vitepress\"},{\"text\":\"요약\",\"items\":[{\"text\":\"토스 | Slash 22 - 미친 생산성을 위한 React Native\",\"link\":\"/log/short/toss-slash22-react-native-for-super-high-productivity\"},{\"text\":\"NDC [키노트] 블록체인과 가상세계의 진화\",\"link\":\"/log/short/ndc-keynotes-evolution-of-blockchain-and-virtual-reality\"}]}]},{\"text\":\"📝 번역\",\"collapsed\":true,\"items\":[{\"text\":\"Vercel Edge Functions - 사용 사례 - OG 이미지 생성\",\"link\":\"/log/short/og-image-generation\"},{\"text\":\"컴포지션 API를 만든 이유\",\"link\":\"/log/why-we-create-the-composition-api\"},{\"text\":\"OAuth 2.0 상태 매개변수로 공격 방지 및 사용자 리디렉션하기\",\"link\":\"/log/short/prevent-attacks-and-redirect-users-with-oauth-2_0-state-parameters\"},{\"text\":\"요약\",\"items\":[{\"text\":\"네 시대의 자바스크립트 프레임워크\",\"link\":\"/log/short/four-eras-of-javascript-frameworks\"},{\"text\":\"State of Vue 2022 암스테르담\",\"link\":\"/log/short/state-of-vue-2022-amsterdam-recap\"}]}]},{\"text\":\"FEArticle\",\"imageUrl\":\"fearticle.png\",\"collapsed\":true,\"items\":[{\"text\":\"웹어셈블리에서 자바스크립트를 빠르게 실행하는 방법\",\"link\":\"/log/making-javascript-run-fast-on-webassembly\"},{\"text\":\"리액트에서 useState를 사용하면서 저지를 수 있는 흔한 실수들\",\"link\":\"/log/avoid-these-common-pitfalls-of-react-usestate\"},{\"text\":\"뷰의 새로운 컴포지션 API를 사용해야 하는 이유\",\"link\":\"/log/why-you-should-be-using-vue-new-composition-api\"},{\"text\":\"완전한 타입 안정성을 가진 웹 애플리케이션\",\"link\":\"/log/fully-typed-web-apps\"},{\"text\":\"로컬 우선 소프트웨어가 있다면 어떨까요?\",\"link\":\"/log/what-if-we-had-local-first-software\"},{\"text\":\"iOS 및 iPadOS의 웹 앱용 웹 푸시\",\"link\":\"/log/web-push-for-web-apps-on-ios-and-ipados\"},{\"text\":\"2023년 Vue에게 기대할 수 있는 점과 React와의 차이점\",\"link\":\"/log/what-to-expect-from-vue-in-2023-and-how-it-differs-from-react\"},{\"text\":\"Cloudflare를 웹 애플리케이션을 위한 최고의 장소로 만들기\",\"link\":\"/log/making-cloudflare-for-web\"},{\"text\":\"가상 DOM: 블록으로 돌아가기\",\"link\":\"/log/virtual-dom-back-in-block\"},{\"text\":\"리액트로 인해 잊었거나 전혀 몰랐던 것들\",\"link\":\"/log/things-you-forgot-or-never-knew-because-of-react\"},{\"text\":\"모던 자바스크립트로 본 반응성을 구현하는 패턴\",\"link\":\"/log/patterns-for-reactivity-with-modern-vanilla-javascript\"},{\"text\":\"클로저 컴파일러의 역사, 그리고 타입스크립트가 승리한 이유\",\"link\":\"/log/the-saga-of-the-closure-compiler-and-why-typescript-won\"},{\"text\":\"소프트 내비게이션 측정 실험하기\",\"link\":\"/log/experimenting-with-measuring-soft-navigations\"},{\"text\":\"Vue 3.4 발표\",\"link\":\"/log/announcing-vue-3-4\"}]},{\"text\":\"🕺🏻 프로젝트\",\"collapsed\":false,\"items\":[{\"text\":\"Iron Branch\",\"link\":\"https://github.com/ktseo41/iron-branch\"},{\"text\":\"문장 공유기\",\"link\":\"https://github.com/ktseo41/quotes-sharer\"},{\"text\":\"일랜시아 루트 계산기\",\"link\":\"https://github.com/ktseo41/route-calculator\"}]},{\"text\":\"🔎 공부\",\"items\":[{\"text\":\"함께자라기\",\"link\":\"/study/함께자라기\"},{\"text\":\"Brilliant\",\"link\":\"/study/Brilliant\"},{\"text\":\"클린 코드\",\"link\":\"/study/클린 코드\"},{\"text\":\"리팩터링\",\"items\":[{\"text\":\"들어가며\",\"link\":\"/study/refactoring/intro\"},{\"text\":\"챕터 1 - 리팩터링: 첫번째 예시\",\"link\":\"/study/refactoring/chapter1\"},{\"text\":\"챕터 2 - 리팩터링 원칙\",\"link\":\"/study/refactoring/chapter2\"},{\"text\":\"챕터 3 - 코드에서 나는 악취\",\"link\":\"/study/refactoring/chapter3\"},{\"text\":\"챕터 4 - 테스트 구축하기\",\"link\":\"/study/refactoring/chapter4\"},{\"text\":\"챕터 6 - 기본적인 리팩터링\",\"link\":\"/study/refactoring/chapter6\"},{\"text\":\"챕터 7 - 캡슐화\",\"link\":\"/study/refactoring/chapter7\"},{\"text\":\"챕터 8 - 기능 이동\",\"link\":\"/study/refactoring/chapter8\"},{\"text\":\"챕터 10 - 조건부 로직 간소화\",\"link\":\"/study/refactoring/chapter10\"},{\"text\":\"챕터 11 - API 리팩터링\",\"link\":\"/study/refactoring/chapter11\"},{\"text\":\"챕터 12 - 상속 다루기\",\"link\":\"/study/refactoring/chapter12\"}]}]},{\"text\":\"📟 Vim\",\"items\":[{\"text\":\"vim\",\"link\":\"/vim\"}]}]},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":false}")</script>
    
  </body>
</html>